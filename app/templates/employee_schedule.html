{% extends "base.html" %}
{% block content %}
<h2 class="text-lg font-semibold mb-4">סידור עבודה - {{ employee['name'] }}</h2>
<div class="mb-4">
  <a href="/employees/{{ employee['id'] }}/profile">חזרה לפרופיל</a>
</div>

{% if message %}
<div class="mb-4 p-3 bg-green-100 border border-green-200 rounded text-green-800 text-sm">
  {{ message }}
</div>
{% endif %}
{% if error %}
<div class="mb-4 p-3 bg-red-100 border border-red-200 rounded text-red-700 text-sm">
  {{ error }}
</div>
{% endif %}

<table class="w-full border border-gray-300 bg-white text-sm mb-6">
  <thead class="bg-gray-200">
    <tr>
      <th class="p-2 border">תאריך</th>
      <th class="p-2 border">מיקום</th>
      <th class="p-2 border">פרויקט</th>
      <th class="p-2 border">שעת התחלה</th>
      <th class="p-2 border">שעת סיום</th>
    </tr>
  </thead>
  <tbody>
    {% for shift in shifts %}
    <tr>
      <td class="p-2 border">{{ shift['date'] }}</td>
      <td class="p-2 border">{{ shift['location'] or '-' }}</td>
      <td class="p-2 border">{{ shift['project'] }}</td>
      <td class="p-2 border">{{ shift['start_time'] }}</td>
      <td class="p-2 border">{{ shift['end_time'] }}</td>
    </tr>
    {% else %}
    <tr>
      <td colspan="5" class="text-center p-4 text-gray-500">אין משמרות להצגה</td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<section class="bg-white border border-gray-200 rounded p-4 shadow-sm">
  <h3 class="font-semibold mb-3 text-sm">הוספת משמרת שבוצעה</h3>
  <form method="post" class="grid gap-3 text-sm">
    <label class="flex flex-col gap-1">
      <span class="font-medium text-gray-600">מיקום</span>
      <input name="location" class="border rounded p-2" placeholder="לדוגמה: תל אביב - מגדל עזריאלי" required>
    </label>
    <label class="flex flex-col gap-1">
      <span class="font-medium text-gray-600">שם פרויקט</span>
      <input name="project_name" list="project-names" class="border rounded p-2" placeholder="לדוגמה: קניון עזריאלי">
      <datalist id="project-names">
        {% for project in projects %}
        <option value="{{ project }}"></option>
        {% endfor %}
      </datalist>
    </label>
    <div class="grid grid-cols-2 gap-3">
      <label class="flex flex-col gap-1">
        <span class="font-medium text-gray-600">תאריך</span>
        <input type="date" name="date" class="border rounded p-2" required>
      </label>
      <label class="flex flex-col gap-1">
        <span class="font-medium text-gray-600">שעת התחלה</span>
        <input type="time" name="start_time" class="border rounded p-2" required>
      </label>
      <label class="flex flex-col gap-1">
        <span class="font-medium text-gray-600">שעת סיום</span>
        <input type="time" name="end_time" class="border rounded p-2" required>
      </label>
    </div>
    <button type="submit" class="self-start bg-blue-600 text-white px-4 py-2 rounded">
      שמור משמרת
    </button>
  </form>
</section>
{% endblock %}
